<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¿»å¡ç‰Œé…å°è¨˜æ†¶éŠæˆ²</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f0f8ff;
            font-family: Arial, sans-serif;
        }
        .game-container {
            display: grid;
            grid-template-columns: repeat(4, 200px); /* å°‡åˆ—å¤§å°æ”¹ç‚º 200px */
            grid-template-rows: repeat(3, 200px); /* å°‡è¡Œå¤§å°æ”¹ç‚º 200px */
            gap: 10px;
            perspective: 1000px;
        }
        .card {
            width: 200px; /* å¡ç‰Œå¯¬åº¦æ”¹ç‚º 200px */
            height: 200px; /* å¡ç‰Œé«˜åº¦æ”¹ç‚º 200px */
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .card.flipped {
            transform: rotateY(180deg);
        }
        .card .front, .card .back {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 10px;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px; /* æ”¾å¤§ emoji åœ–æ¡ˆ */
            text-align: center;
            user-select: none;
        }
        .card .back {
            background-color: #ffcc80;
            font-size: 80px; /* æ”¾å¤§ emoji åœ–æ¡ˆ */
        }

        .card .front {
            background-color: lightgray;
            transform: rotateY(180deg);
        }
        .card.matched .front {
            background-color: lightblue !important;
        }

        .controls {
            margin-top: 20px;
            font-size: 20px;
        }
        button {
            background-color: #4CAF50; /* ç¶ è‰²èƒŒæ™¯ */
            color: white; /* ç™½è‰²æ–‡å­— */
            font-size: 18px; /* æ–‡å­—å¤§å° */
            padding: 15px 32px; /* å…§é‚Šè· */
            border: none; /* å»é™¤é‚Šæ¡† */
            border-radius: 8px; /* åœ“è§’ */
            cursor: pointer; /* ç•¶æ»‘é¼ æ”¾åˆ°æŒ‰éˆ•ä¸Šæ™‚é¡¯ç¤ºç‚ºæŒ‡æ¨™ */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* è¼•å¾®é™°å½± */
            transition: background-color 0.3s, transform 0.2s; /* å‹•ç•«æ•ˆæœ */
        }

        button:hover {
            background-color: #45a049; /* æ»‘é¼ æ‡¸åœæ™‚æ”¹è®Šé¡è‰² */
            transform: translateY(-2px); /* é¼ æ¨™æ‡¸åœæ™‚å¾®å¾®ä¸Šç§» */
        }

        button:active {
            background-color: #388e3c; /* é»æ“Šæ™‚é¡è‰²è®Šæš— */
            transform: translateY(2px); /* é»æ“Šæ™‚ä¸‹ç§» */
        }

        button:disabled {
            background-color: #a5d6a7; /* ç¦ç”¨æ™‚çš„é¡è‰² */
            cursor: not-allowed; /* ç¦ç”¨æ™‚é¼ æ¨™æ¨£å¼ */
        }

    </style>
</head>
<body>
    <h1>ç¿»å¡ç‰Œé…å°è¨˜æ†¶éŠæˆ²</h1>
    <div class="game-container" id="game"></div>
    <div class="controls">
        <p>å‰©é¤˜æ™‚é–“ï¼š<span id="timer">60</span> ç§’</p>
        <p id="result"></p>
        <button id="restartButton" onclick="startGame()" disabled>é‡æ–°é–‹å§‹</button>
    </div>
    <script>
        const words = [
            ["ğŸ‡", "grapes"], ["ğŸˆ", "melon"], ["ğŸŠ", "orange"], ["ğŸ‹", "lemon"], ["ğŸ‹", "lemon"],
            ["ğŸŒ", "banana"], ["ğŸ¥­", "mango"], ["ğŸ", "apple"], ["ğŸ", "pear"], ["ğŸ‘", "peach"],
            ["ğŸ’", "cherry"], ["ğŸ¥", "kiwi"], ["ğŸ…", "tomato"], ["ğŸŒ¶ï¸", "chili"], ["ğŸ§„", "garlic"],
            ["ğŸ§…", "onion"], ["ğŸ¥œ", "peanut"], ["ğŸ¶", "dog"], ["ğŸˆ", "cat"], ["ğŸ¦", "lion"],
            ["ğŸ¯", "tiger"], ["ğŸ´", "horse"], ["ğŸ«", "moose"], ["ğŸ€", "mouse"], ["ğŸ", "goat"],
            ["ğŸ", "ram"], ["ğŸ·", "pig"], ["ğŸ„", "cow"], ["ğŸ»", "bear"], ["ğŸ¦˜", "koala"],
            ["ğŸ¼", "panda"], ["ğŸ¦…", "eagle"], ["ğŸ¦‰", "owl"], ["ğŸ¦¤", "stork"]
        ];
        let selectedCards = [];
        let matchedCards = 0;
        let timeLeft = 60;
        let timer;
        let isChecking = false;

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function startGame() {
            // ç¦ç”¨é‡æ–°é–‹å§‹æŒ‰éˆ•ï¼Œç›´åˆ°éŠæˆ²çµæŸ
            document.getElementById('restartButton').disabled = true;
            
            clearInterval(timer);
            document.getElementById('result').innerText = '';
            timeLeft = 60;
            document.getElementById('timer').innerText = timeLeft;
            matchedCards = 0;
            selectedCards = [];
            isChecking = false;
            let gameContainer = document.getElementById('game');
            gameContainer.innerHTML = '';
            let selectedPairs = shuffle(words).slice(0, 6);
            let cardList = shuffle([...selectedPairs.flat()]);

            cardList.forEach(text => {
                let card = document.createElement('div');
                card.classList.add('card');
                card.dataset.value = text;
                card.innerHTML = `<div class='front'>${text}</div><div class='back'>ğŸ¥•</div>`;
                card.addEventListener('click', () => flipCard(card));
                gameContainer.appendChild(card);
            });

            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                if (timeLeft === 0) {
                    clearInterval(timer);
                    document.getElementById('result').innerText = 'æ™‚é–“åˆ°ï¼éŠæˆ²å¤±æ•—ï¼';
                    document.getElementById('result').style.color = 'red';  // å°‡æ–‡å­—é¡è‰²è¨­ç‚ºç´…è‰²
                    document.getElementById('timer').style.display = 'none';  // éŠæˆ²æ™‚é–“éš±è—
                    // éŠæˆ²çµæŸå¾Œå•Ÿç”¨é‡æ–°é–‹å§‹æŒ‰éˆ•
                    document.getElementById('restartButton').disabled = false;
                }
            }, 1000);
        }

        function flipCard(card) {
            if (isChecking || selectedCards.length >= 2 || card.classList.contains('flipped')) {
                return;
            }
            card.classList.add('flipped');
            selectedCards.push(card);
            if (selectedCards.length === 2) {
                isChecking = true;
                setTimeout(() => {
                    checkMatch();
                    setTimeout(() => { isChecking = false; }, 500); // åœ 0.5 ç§’å¾Œæ‰èƒ½ç¿»ä¸‹ä¸€è¼ª
                }, 500);
            }
        }

        function checkMatch() {
            let [card1, card2] = selectedCards;
            let pairs = Object.fromEntries(words);
            if (pairs[card1.dataset.value] === card2.dataset.value ||
                pairs[card2.dataset.value] === card1.dataset.value) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedCards += 2;
                if (matchedCards === 12) {
                    clearInterval(timer);
                    document.getElementById('result').innerText = `æŒ‘æˆ°æˆåŠŸï¼ç”¨æ™‚ ${60 - timeLeft} ç§’`;
                    // éŠæˆ²çµæŸå¾Œå•Ÿç”¨é‡æ–°é–‹å§‹æŒ‰éˆ•
                    document.getElementById('restartButton').disabled = false;
                }
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                }, 500);
            }
            selectedCards = [];
        }

        startGame();
    </script>
</body>
</html>
