<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dino and Human Game</title>
    <style>
        body {
            font-family: monospace, sans-serif;
            margin: 0;
            padding: 0;
        }

        /* éŠæˆ²å®¹å™¨ */
        .game-container {
            width: 1200px;
            height: 700px;
            background-color: #f0f0f0;
            position: relative;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            overflow: hidden;
        }

        /* æé¾å’Œäººå½¢è§’è‰²å®¹å™¨ */
        .dino-container, .human-container {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.25s ease-in-out;
        }
        /* è§’è‰²ï¼ˆæé¾èˆ‡äººå½¢ï¼‰æ–‡å­— */
        .dino, .human {
            white-space: pre;
        }

        .dino-container {
            left: 0px;
            top: 350px;
        }
        .dino {
            font-size: 48px;
            line-height: 1;
            color: #000000;
        }

        .human-container {
            left: 350px;
            top: 580px;
        }
        .human {
            color:#EA7500;
            font-size: 20px;
        }
		
        /* å±±è„ˆå®¹å™¨ */
        .mountain-container {
            position: absolute;
            right: 0px;
            top: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .mountain {
            color: #613030	;
            font-size: 20px;
        }



        .rotated-psi {
            display: inline-block;
            transform: rotate(90deg);
        }

        /* è‹±æ–‡å–®å­—é¡¯ç¤ºå®¹å™¨ */
        .fruit-container {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            color: #00A600;  /* æ›´æ–°é¡è‰²ç‚º #00A600 */
            font-weight: bold;
        }

        .fruit-container .chinese {
            color: #006400;  /* æ›´æ·±çš„ç¶ è‰² */
        }

        /* ç”¨æˆ¶è¼¸å…¥æ¡†å®¹å™¨ */
        .input-container {
            position: absolute;
            top: 180px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
        }

        input {
            font-size: 24px;
            padding: 5px;
            width: 200px;
            text-align: center;
        }

        .hidden {
            visibility: hidden;
        }

        /* è˜‹æœæ‰è½å‹•ç•« */
        @keyframes dropApple {
            0% {
                top: 400px;
            }
            100% {
                top: 580px;
            }
        }

        .apple {
            position: absolute;
            font-size: 32px;
            animation: dropApple 0.5s linear forwards;
        }

        /* è·é›¢é¡¯ç¤ºå®¹å™¨ */
        .distance-container {
            position: absolute;
            top: 780px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            font-weight: bold;
            color: #FFF;
        }


        /* æ‘‡æ™ƒå‹•ç•« */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        /* çµ¦è¼¸å…¥æ¡†æ‡‰ç”¨æ–æ™ƒæ•ˆæœ */
        .shake {
            animation: shake 0.3s ease-in-out;
        }

        .restart-btn {
            position: absolute;
            top: 300px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            font-size: 24px;
            background-color: #E800E8;
            color: #fff;
            border: none;
            cursor: pointer;
        }
		#countdownContainer {
    color: #0000E3;
}
    </style>
</head>
<body>
    <div style="height: 30px;"></div>
    <div class="game-container">
        <div class="dino-container" id="dinoContainer">
            <pre class="dino">
     âŠ™âŠ™     
    â–„â–¼â–¼â–¼â–¼â–¼
    â–ˆâ–²â–²â–²â–²â–²
   â–Ÿâ–ˆâ–ˆâ–ˆ<span class="rotated-psi">Î¨</span>
  â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆ 
    <span id="eye1">â–™</span> <span id="eye2">â–™</span>
            </pre> 
        </div>

        <div class="human-container" id="humanContainer">
            <pre><span class="human">     Help ~ 
 /âš‡/
  â–ˆ
 <span id="hand1">Êƒ</span> <span id="hand2">Ê…</span></span></pre>
        </div>
		
        <div class="mountain-container" id="mountainContainer">
            <pre><span class="mountain">    
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
 â–ˆ      â–ˆâ–ˆ
 â–Œ       â–ˆ
â–Œ        â–ˆ
â–Œ        â–ˆ
   </span></pre>
        </div>
    </div>

<div class="fruit-container" id="fruitDisplay"></div>
    <div class="input-container">
        <input type="text" id="userInput" placeholder="è¼¸å…¥è‹±æ–‡">
    </div>
<div style="text-align: center; font-size: 18px; padding-top: 20px;">
    ç¨‹å¼ä½œè€…ï¼šé˜¿é‚¦è€å¸« Ver.20250323
</div>
    <div class="distance-container" id="distanceDisplay">è·é›¢: 0</div> 

    <script>
const fruits = [
    {english: "apple", chinese: "è˜‹æœ"},
    {english: "pear", chinese: "æ¢¨å­"},
    {english: "fig", chinese: "ç„¡èŠ±æœ"},
    {english: "kiwi", chinese: "å¥‡ç•°æœ"},
    {english: "plum", chinese: "æå­"},
    {english: "mango", chinese: "é³³æ¢¨"},
    {english: "date", chinese: "æ£"},
    {english: "lime", chinese: "é…¸æ©™"},
    {english: "lemon", chinese: "æª¸æª¬"},
    {english: "grape", chinese: "è‘¡è„"},
    {english: "watermelon", chinese: "è¥¿ç“œ"},
    {english: "tangerine", chinese: "æ©˜å­"},
    {english: "banana", chinese: "é¦™è•‰"},
    {english: "pineapple", chinese: "é³³æ¢¨"},
    {english: "peach", chinese: "æ¡ƒå­"},
    {english: "cherry", chinese: "æ«»æ¡ƒ"},
    {english: "strawberry", chinese: "è‰è“"},
    {english: "blueberry", chinese: "è—è“"},
    {english: "tomato", chinese: "ç•ªèŒ„"},
    {english: "avocado", chinese: "é…ªæ¢¨"},
    {english: "eggplant", chinese: "èŒ„å­"},
    {english: "potato", chinese: "é¦¬éˆ´è–¯"},
    {english: "carrot", chinese: "èƒ¡è˜¿è””"},
    {english: "corn", chinese: "ç‰ç±³"},
    {english: "chili", chinese: "è¾£æ¤’"},
    {english: "leafy green", chinese: "ç¶ è‘‰è”¬èœ"},
    {english: "broccoli", chinese: "è¥¿è˜­èŠ±"},
    {english: "garlic", chinese: "å¤§è’œ"},
    {english: "onion", chinese: "æ´‹è”¥"},
    {english: "peanut", chinese: "èŠ±ç”Ÿ"}
];
        let fruitDisplay = document.getElementById("fruitDisplay");
        let userInput = document.getElementById("userInput");
        let humanContainer = document.getElementById("humanContainer");
        let dinoContainer = document.getElementById("dinoContainer");
        let distanceDisplay = document.getElementById("distanceDisplay");

        let countdownContainer = document.createElement("div");
        countdownContainer.style.position = "absolute";
        countdownContainer.style.top = "300px";
        countdownContainer.style.left = "50%";
        countdownContainer.style.transform = "translate(-50%, -50%)";
        countdownContainer.style.fontSize = "64px";
        countdownContainer.style.fontWeight = "bold";
        countdownContainer.style.color = "#333";
		countdownContainer.style.color = "#0000E3";
        document.body.appendChild(countdownContainer);

        let restartButton = document.createElement('button');
        restartButton.textContent = "Restart";
        restartButton.classList.add('restart-btn');
        document.body.appendChild(restartButton);
        restartButton.style.display = "none";

        userInput.disabled = true;

        let isGameOver = false; // é€™æ˜¯ç”¨ä¾†åˆ¤æ–·éŠæˆ²æ˜¯å¦çµæŸ

        // è¿½è¹¤å·²ä½¿ç”¨çš„é¡Œç›®
        let usedFruits = [];
        let totalQuestions = 0;

        function getRandomFruit() {
            // åœ¨å‰10é¡Œå…§ç¢ºä¿ä¸é‡è¤‡
            if (totalQuestions < 10) {
                let availableFruits = fruits.filter(fruit => !usedFruits.includes(fruit));
                if (availableFruits.length === 0) {
                    usedFruits = []; // å¦‚æœæ‰€æœ‰é¡Œç›®éƒ½ç”¨å®Œäº†ï¼Œé‡ç½®
                    availableFruits = fruits;
                }
                let randomIndex = Math.floor(Math.random() * availableFruits.length);
                let selectedFruit = availableFruits[randomIndex];
                usedFruits.push(selectedFruit);
                totalQuestions++;
                return selectedFruit;
            } else {
                // 10é¡Œä¹‹å¾Œéš¨æ©Ÿå‡ºé¡Œ
                return fruits[Math.floor(Math.random() * fruits.length)];
            }
        }

function displayFruit() {
    let fruit = getRandomFruit();
    // ç”¨ span åŒ…è£ä¸­æ–‡ä¸¦æ‡‰ç”¨ .chinese é¡åˆ¥
    fruitDisplay.innerHTML = `${fruit.english.toUpperCase()} <span class="chinese">(${fruit.chinese})</span>`;
}

        let humanLeftPosition = 350;  // åˆå§‹ä½ç½®

        function dropApple() {
            let appleElement = document.createElement('div');
            appleElement.textContent = "ğŸ";
            appleElement.classList.add('apple');

            let humanPosition = humanContainer.getBoundingClientRect();
            appleElement.style.left = `${humanPosition.left + humanPosition.width / 2 - 20}px`;
            document.body.appendChild(appleElement);

            appleElement.addEventListener('animationend', () => {
                appleElement.remove();
                // ç•¶è˜‹æœæ¶ˆå¤±å¾Œæ›´æ–° human-container çš„ä½ç½®
                humanLeftPosition += 20;  // å¢åŠ  20px
                humanContainer.style.left = `${humanLeftPosition}px`; // æ›´æ–°ä½ç½®
            });
        }

        // åœ¨ç”¨æˆ¶è¼¸å…¥éŒ¯èª¤æ™‚æ–æ™ƒè¼¸å…¥æ¡†
userInput.addEventListener("keypress", function (e) {
    if (e.key === "Enter") {
        let inputValue = userInput.value.trim().toLowerCase();
        let currentFruit = document.querySelector('.fruit-container').textContent.toLowerCase();

        // å»é™¤æ‹¬è™ŸåŠä¸­æ–‡ï¼Œåƒ…æ¯”å°è‹±æ–‡
        currentFruit = currentFruit.replace(/\(.*\)/, "").trim();

        if (inputValue === currentFruit) {
            userInput.value = '';
            userInput.classList.remove('shake');
            dropApple();
            displayFruit();
        } else {
            userInput.classList.add('shake');
            setTimeout(() => {
                userInput.classList.remove('shake');
            }, 500);
        }
    }
});

        function toggleEyes() {
            let eye1 = document.getElementById("eye1");
            let eye2 = document.getElementById("eye2");

            setInterval(() => {
                eye1.classList.toggle("hidden");
                setTimeout(() => {
                    eye2.classList.toggle("hidden");
                }, 250);
            }, 250);
        }

        function toggleHands() {
            let hand1 = document.getElementById("hand1");
            let hand2 = document.getElementById("hand2");

            setInterval(() => {
                hand1.classList.toggle("hidden");
                setTimeout(() => {
                    hand2.classList.toggle("hidden");
                }, 150);
            }, 150);
        }

        let dinoMoveInterval;
        let humanMoveInterval;

        function dinoMove() {
            let leftPosition = 0;
            dinoMoveInterval = setInterval(() => {
                if (leftPosition < 900 && !isGameOver) {
                    leftPosition += 0.3;
                    dinoContainer.style.left = leftPosition + 'px';
                } else {
                    clearInterval(dinoMoveInterval);
                    if (!isGameOver) {
                        gameWon(); // æé¾åˆ°é” 900pxï¼Œé¡¯ç¤ºæˆåŠŸé€ƒè„«
                    }
                }
            }, 16);
        }

        function humanMove() {
            humanMoveInterval = setInterval(() => {
                if (humanLeftPosition < 1120 && !isGameOver) {
                    humanLeftPosition += 0.2; // æ¯æ¬¡ç§»å‹• 0.2px
                    humanContainer.style.left = `${humanLeftPosition}px`;
                    
                    // ç•¶ä½ç½®åˆ°é”1119æ™‚éš±è—human-container
                    if (humanLeftPosition >= 1119) {
                        humanContainer.style.display = 'none';
                    }
                } else {
                    clearInterval(humanMoveInterval);
                    if (!isGameOver) {
                        userInput.disabled = true; // ç¦ç”¨è¼¸å…¥æ¡†
                    }
                }
            }, 16);
        }

        function updateDistance() {
            let dinoPosition = dinoContainer.getBoundingClientRect();
            let humanPosition = humanContainer.getBoundingClientRect();
            let distance = Math.abs(dinoPosition.left - humanPosition.left);
            let distanceAfterSubtract = Math.floor(distance) - 200;  // å–æ•´æ•¸ä¸¦æ¸›å» 200
    distanceDisplay.textContent = `è·é›¢: ${distanceAfterSubtract}`;  // é¡¯ç¤ºæ›´æ–°å¾Œçš„è·é›¢
            if (distance < 200 && !isGameOver) {
                gameLost(); // è·é›¢å°æ–¼200ï¼Œé¡¯ç¤ºå¤±æ•—
            }
        }

        // è®“æé¾è·³èº
        function dinoJump() {
            let up = true;
            setInterval(() => {
                dinoContainer.style.transform = up ? "translateY(-8px)" : "translateY(0)";
                up = !up;
            }, 250);
        }

        // è®“äººå½¢è§’è‰²è·³èº
        function humanJump() {
            let up = true;
            setInterval(() => {
                humanContainer.style.transform = up ? "translateY(-3px)" : "translateY(0)";
                up = !up;
            }, 150);
        }

        function gameLost() {
            isGameOver = true; // è¨­ç½®éŠæˆ²çµæŸ
            // é¡¯ç¤ºâ€œé€ƒè„«å¤±æ•—â€ä¿¡æ¯
            let gameLostMessage = document.createElement('div');
            gameLostMessage.textContent = "é€ƒè„«å¤±æ•— ... ...";
            gameLostMessage.style.fontSize = "36px";
            gameLostMessage.style.fontWeight = "bold";
            gameLostMessage.style.color = "	#CE0000";
            gameLostMessage.style.position = "absolute";
            gameLostMessage.style.top = "250px";
            gameLostMessage.style.left = "50%";
            gameLostMessage.style.transform = "translateX(-50%)";
            document.body.appendChild(gameLostMessage);

            // åœæ­¢æ‰€æœ‰ç§»å‹•
            clearInterval(dinoMoveInterval);
            clearInterval(humanMoveInterval);

            // ç¦ç”¨è¼¸å…¥æ¡†
            userInput.disabled = true;

            // é¡¯ç¤ºâ€œRestartâ€æŒ‰éˆ•
            restartButton.style.display = "inline-block";
        }

        function gameWon() {
            isGameOver = true; // è¨­ç½®éŠæˆ²çµæŸ
            // é¡¯ç¤ºâ€œæˆåŠŸé€ƒè„«â€ä¿¡æ¯
            let gameWonMessage = document.createElement('div');
            gameWonMessage.textContent = "æˆåŠŸé€ƒè„«ï¼";
            gameWonMessage.style.fontSize = "36px";
            gameWonMessage.style.fontWeight = "bold";
            gameWonMessage.style.color = "#32cd32";
            gameWonMessage.style.position = "absolute";
            gameWonMessage.style.top = "250px";
            gameWonMessage.style.left = "50%";
            gameWonMessage.style.transform = "translateX(-50%)";
            document.body.appendChild(gameWonMessage);

            // åœæ­¢æ‰€æœ‰ç§»å‹•
            clearInterval(dinoMoveInterval);
            clearInterval(humanMoveInterval);

            // é¡¯ç¤ºâ€œRestartâ€æŒ‰éˆ•
            restartButton.style.display = "inline-block";
        }

        restartButton.addEventListener('click', () => {
            // é‡æ–°è¼‰å…¥éŠæˆ²
            window.location.reload();
        });

        function startCountdown(callback) {
            let countdown = 3;
            countdownContainer.textContent = countdown;

            let timer = setInterval(() => {
                countdown--;
                if (countdown > -1) {
                    countdownContainer.textContent = countdown;
                } else {
                    countdownContainer.textContent = "Run !!";
                    setTimeout(() => {
                        countdownContainer.style.display = "none";
                        userInput.disabled = false;
                        callback();
                    }, 1000);
                    clearInterval(timer);
                }
            }, 1000);
        }

        // ç§»é™¤é€²åº¦é¡¯ç¤ºçš„ div
        const progressContainer = document.querySelector('div[style*="é€²åº¦"]');
        if (progressContainer) {
            progressContainer.remove();
        }

        startCountdown(() => {
            dinoMove();  // é–‹å§‹æé¾ç§»å‹•
            humanMove(); // é–‹å§‹äººå½¢è§’è‰²ç§»å‹•
            dinoJump();  // é–‹å§‹æé¾è·³èº
            humanJump(); // é–‹å§‹äººå½¢è·³èº
            toggleEyes();
            toggleHands();
            displayFruit();
            setInterval(updateDistance, 16);  // æ¯16æ¯«ç§’æ›´æ–°ä¸€æ¬¡è·é›¢
        });
    </script>
</body>
</html>
